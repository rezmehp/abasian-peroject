{% extends 'base.html' %}
{% block title %} register {% endblock %}
{% block content %}
<!--test-->
<div class="hero is-fullheight is-primary has-background-dark">
    
    <div class="hero-body">
        <div class="container">
            <!--        تیتر بالای صفحه بعد از سکشن-->
            <h1 class="title has-text-centered">
                با ثبت نام در سایت ما به بهترین فایل های آموزشی دسترسی داشته باشید
            </h1>

            <form action="{% url 'register' %}" method="POST" class="section has-background-light">
                {% csrf_token %}
                <div class="container ">
                    <div class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded has-icons-right">
                                            
                                            <input name="username" class="input" type="text" placeholder="نام کاربری را به لاتین وارد کنید" onkeypress="return (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) || (event.charCode >= 48 && event.charCode <= 57)"  required/>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-user"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded has-icons-right">
                                            <input name="first_name" class="input" type="text" placeholder="نام" required/>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-user"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded has-icons-right">
                                            <input class="input" type="text" name="last_name"
                                                placeholder="نام خانوادگی" required />
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-user"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded  has-icons-right">
                                            <input class="input" type="password" name="password"
                                                placeholder="رمز عبور" required/>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-key"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded  has-icons-right">
                                            <input class="input" type="password" name="password2"
                                                placeholder="تکرار رمز عبور" required />
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-key"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded has-icons-right">
                                            <input class="input" type="number" min="0" max="9999999999999" name="tell" placeholder="تلفن همراه" required/>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-phone"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <div class="field">
                                            <div class="control is-expanded has-icons-right select is-fullwidth">
                                                <select name="gender">
                                                    <option selected>جنسیت</option>
                                                    <option>مرد</option>
                                                    <option>زن</option>
                                                   
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded has-icons-right">
                                            <input class="input" type="number"  min="0" max="9999999999999" name="melli_code" placeholder="کد ملی" required />
                                            <span class="icon is-small is-right">
                                                <i class="far fa-id-badge"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <p class="control is-expanded  has-icons-right">
                                            <input class="input" type="email" name="email" placeholder="ایمیل" required />
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-envelope"></i>
                                            </span>
                                            <span class="icon is-small is-right">
                                                <i class="fas fa-check"></i>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <div class="control is-expanded has-text-right has-text-dark is-fullwidth">
                                            <label>مقطع تحصیلی</label>                                         
                                        </div>
                                        <div class="control is-expanded has-icons-right select is-fullwidth">
                                            <select id="maghtaidtemp" name="maghta" required>
                                               
                                                {% if maghtaTahsilis %} {% for maghtaTahsili in maghtaTahsilis %}
                                                <option data-id="{{ maghtaTahsili.id }}"
                                                 value="{{ maghtaTahsili.id }}">
                                                 {{ maghtaTahsili.maghta }}</option>
                                                {% endfor %} 
                                                {% else %}
                                                <div class="col-md-12">
                                                    <p>No maghta Available</p>
                                                </div>
                                                {% endif %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>




                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <div class="control is-expanded has-text-right has-text-dark is-fullwidth">
                                            <label>رشته تحصیلی</label>                                         
                                        </div>
                                        <div class="control is-expanded has-icons-right select is-fullwidth">
                                            <select id="reshtenidtemp" name="reshte" required>
                                                
                                                {% if reshteTahsilis %}
                                                {% for reshteTahsili in reshteTahsilis %}
                                                <option value="{{ reshteTahsili.id }}">
                                                {{ reshteTahsili.reshte }}</option>
                                                {% endfor %}
                                                {% else %}
                                                <div class="col-md-12">
                                                    <p>No Ostan Available</p>
                                                </div>
                                                {% endif %}
                                            </select>
                                          
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>





                    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                    <script>
                        $(document).ready(function () {
                            $('select[name="maghta"]').on('change', function () {
                                var sardaste_id = $("#maghtaidtemp option:selected").attr('data-id');
                                if (sardaste_id) {
                                    $.ajax({
                                        url: '/accounts/m/' + sardaste_id,
                                        type: 'GET',
                                        dataType: 'json',
                                        success: function (data) {
                                            console.log(data);
                                            $('select[name="reshte"]').empty();
                                                $.each(data, function (key, value) {
                                                    $('select[name="reshte"]').append('<option value="' + value + '">' + value + '</option>');
                                                });  
                                        },
                                    })
                                } else {
                                    $('select[name="reshte"]').empty();
                                }
                            })
                        })
                    </script>




                    <div id="karname11111" class="columns">
                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <div class="control is-expanded has-text-right has-text-dark is-fullwidth">
                                            <label>استان</label>                                         
                                        </div>
                                        <div class="control is-expanded has-icons-right select is-fullwidth">
                                            <select id="ostanidtemp" name="ostan" required>
                                                {% if ostanhas %} {% for ostanha in ostanhas %}
                                                <option data-id="{{ ostanha.id }}"
                                                value="{{ ostanha.id }}">
                                                {{ ostanha.ostanName }}</option>
                                                {% endfor %} {% else %}
                                                <div class="col-md-12">
                                                    <p>No Ostan Available</p>
                                                </div>
                                                {% endif %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>




                        <div class="column">
                            <div class="field is-horizontal">
                                <div class="field-body">
                                    <div class="field">
                                        <div class="control is-expanded has-text-right has-text-dark is-fullwidth">
                                            <label>شهر</label>                                         
                                        </div>
                                        <div class="control is-expanded has-icons-right select is-fullwidth">
                                            <select id="shahridtemp" name="shahr" required>
                                                {% if shahrhas %}
                                                {% for shahrha in shahrhas %}
                                                <option value="{{ shahrha.id }}">{{ shahrha.shahrNames }}</option>
                                                {% endfor %} {% else %}
                                                <div class="col-md-12">
                                                   <p>No Ostan Available</p>
                                                </div>
                                                {% endif %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>




                    
                    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                    <script>
                        $(document).ready(function () {
                            $('select[name="ostan"]').on('change', function () {
                                var sardaste_id = $("#ostanidtemp option:selected").attr('data-id');
                                if (sardaste_id) {
                                    $.ajax({
                                        url: '/accounts/o/' + sardaste_id,
                                        type: 'GET',
                                        dataType: 'json',
                                        success: function (data) {
                                            console.log(data);
                                            $('select[name="shahr"]').empty();
                                                $.each(data, function (key, value) {
                                                    $('select[name="shahr"]').append('<option value="' + value + '">' + value + '</option>');
                                                });  
                                        },
                                    })
                                } else {
                                    $('select[name="shahr"]').empty();
                                }
                            })
                        })
                    </script>


                    <div class="field is-horizontal">
                        <div class="field-body">
                            <div class="field">
                                <div class="control">
                                    <button>ثبت نام</button>
                                    <div class="has-background-warning has-text-danger has-text-right">
                                        {% include '_partials/_alerts.html' %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}